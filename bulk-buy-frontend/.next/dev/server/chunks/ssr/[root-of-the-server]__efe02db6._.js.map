{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/app/buyer/rfq/%5Bid%5D/pay/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\r\nimport { api } from \"@/lib/api\";\r\nimport { \r\n  ShieldCheck, CreditCard, Landmark, Zap, \r\n  ArrowRight, Lock, CheckCircle2, FileText, Download \r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { useState } from \"react\";\r\n\r\nexport default function BuyerPaymentPage() {\r\n  const { id } = useParams();\r\n  const router = useRouter();\r\n  const [isPaid, setIsPaid] = useState(false);\r\n\r\n  const { data: rfq, isLoading } = useQuery({\r\n    queryKey: [\"rfq-payment\", id],\r\n    queryFn: async () => {\r\n      const res = await api.get(`/rfq/${id}`);\r\n      return res.data;\r\n    }\r\n  });\r\n\r\n  const processPayment = useMutation({\r\n    mutationFn: async () => {\r\n      return await api.patch(`/rfq/${id}/status`, { status: \"PAID\" });\r\n    },\r\n    onSuccess: () => {\r\n      setIsPaid(true);\r\n      toast.success(\"Funds Secured in Escrow\");\r\n    }\r\n  });\r\n\r\n  if (isLoading) return <div className=\"min-h-screen bg-[#020617] flex items-center justify-center font-black text-blue-500 animate-pulse uppercase tracking-[0.4em]\">Establishing Secure Connection...</div>;\r\n\r\n  const total = rfq.quantity * (rfq.vendorCounterPrice || rfq.targetUnitPrice);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#020617] text-white p-8 selection:bg-blue-500/30\">\r\n      <div className=\"max-w-4xl mx-auto py-12\">\r\n        \r\n        {/* HEADER */}\r\n        <div className=\"text-center mb-12\">\r\n          <div className=\"inline-flex items-center gap-2 bg-blue-500/10 text-blue-400 px-4 py-1 rounded-full border border-blue-500/20 text-[10px] font-black uppercase tracking-widest mb-4\">\r\n            <Lock size={12} /> {isPaid ? \"Transaction Finalized\" : \"Encrypted Escrow Terminal\"}\r\n          </div>\r\n          <h1 className=\"text-5xl font-[1000] tracking-tighter italic uppercase\">\r\n            {isPaid ? \"Payment Secured\" : \"Finalize Contract\"}\r\n          </h1>\r\n        </div>\r\n\r\n        <div className=\"grid md:grid-cols-2 gap-8\">\r\n          {/* LEFT COLUMN: PAYMENT OR SUCCESS INFO */}\r\n          <div className=\"space-y-4\">\r\n            {!isPaid ? (\r\n              <>\r\n                <h2 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4\">Select Funding Source</h2>\r\n                <button className=\"w-full bg-[#0F172A] border-2 border-blue-600 p-6 rounded-[2rem] flex items-center justify-between group transition-all\">\r\n                  <div className=\"flex items-center gap-4 text-left\">\r\n                    <div className=\"w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center shadow-[0_0_20px_rgba(37,99,235,0.4)]\"><CreditCard size={24} /></div>\r\n                    <div>\r\n                      <p className=\"font-black italic uppercase text-sm\">Corporate Card</p>\r\n                      <p className=\"text-[10px] text-slate-500 font-bold uppercase\">Visa / Mastercard / Amex</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"w-6 h-6 rounded-full border-4 border-blue-600 bg-white\" />\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <div className=\"bg-emerald-500/5 border border-emerald-500/20 p-8 rounded-[2.5rem] space-y-6\">\r\n                <div className=\"w-16 h-16 bg-emerald-500 rounded-2xl flex items-center justify-center text-black shadow-[0_0_30px_rgba(16,185,129,0.4)]\">\r\n                  <CheckCircle2 size={32} />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-xl font-black italic uppercase italic\">Escrow Active</h3>\r\n                  <p className=\"text-slate-400 text-sm mt-2 leading-relaxed font-medium\">\r\n                    Your funds are held securely. The vendor has been notified to begin fulfillment.\r\n                  </p>\r\n                </div>\r\n                <div className=\"pt-4 space-y-3\">\r\n                  <button className=\"w-full flex items-center justify-center gap-2 bg-white text-black py-4 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-emerald-500 transition-all\">\r\n                    <Download size={16} /> Download Tax Invoice\r\n                  </button>\r\n                  <button \r\n                    onClick={() => router.push('/buyer/dashboard')}\r\n                    className=\"w-full text-slate-500 hover:text-white text-[10px] font-black uppercase tracking-widest py-2\"\r\n                  >\r\n                    Return to Dashboard\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* RIGHT COLUMN: EXECUTION SUMMARY */}\r\n          <div className=\"bg-[#0F172A] border border-blue-900/20 rounded-[3rem] p-8 shadow-2xl relative overflow-hidden h-fit\">\r\n            <h3 className=\"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-6 uppercase\">Execution Summary</h3>\r\n            <div className=\"space-y-4 mb-8\">\r\n              <div className=\"flex justify-between text-sm font-bold\">\r\n                <span className=\"text-slate-400\">Product</span>\r\n                <span className=\"text-white italic uppercase\">{rfq.productId?.name}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm font-bold\">\r\n                <span className=\"text-slate-400\">Total Units</span>\r\n                <span className=\"text-white\">{rfq.quantity.toLocaleString()}</span>\r\n              </div>\r\n              <div className=\"h-px bg-blue-900/20\" />\r\n              <div className=\"flex justify-between items-end\">\r\n                <span className=\"text-[10px] font-black text-blue-500 uppercase tracking-widest\">Amount Due</span>\r\n                <span className=\"text-4xl font-[1000] tracking-tighter text-white tabular-nums italic\">\r\n                  ${total.toLocaleString()}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {!isPaid && (\r\n              <button \r\n                onClick={() => processPayment.mutate()}\r\n                disabled={processPayment.isPending}\r\n                className=\"w-full bg-blue-600 hover:bg-emerald-500 text-white hover:text-black py-5 rounded-[1.5rem] font-[1000] uppercase italic tracking-[0.2em] transition-all flex items-center justify-center gap-2 group\"\r\n              >\r\n                {processPayment.isPending ? \"AUTHORIZING...\" : \"EXECUTE PAYMENT\"}\r\n                <ArrowRight size={20} className=\"group-hover:translate-x-1 transition-transform\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}