{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n  withCredentials: true,\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,MAAM,mMAAK,CAAC,MAAM,CAAC;IAC9B,OAAO;IACP,iBAAiB;AACnB"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/lib/auth.ts"],"sourcesContent":["\r\nimport {api} from \"./api\"; // Remove the { } brackets\r\n\r\nexport const registerUser = (data: {\r\n  email: string;\r\n  password: string;\r\n  role: \"BUYER\" | \"VENDOR\";\r\n  organizationName?: string;\r\n}) => api.post(\"/auth/register\", data);\r\n\r\nexport const loginUser = (data: {\r\n  email: string;\r\n  password: string;\r\n}) => api.post(\"/auth/login\", data);\r\n\r\nexport const verifyEmail = (token: string) =>\r\n  api.get(`/auth/verify-email?token=${token}`);\r\nexport const forgotPassword = (email: string) =>\r\n  api.post(\"/auth/forgot-password\", { email });\r\n\r\nexport const resetPassword = (data: {\r\n  token: string;\r\n  password: string;\r\n}) => api.post(\"/auth/reset-password\", data);\r\n// Add an optional config parameter\r\nexport const getMe = (token?: string) => {\r\n  const config = token ? { headers: { Authorization: `Bearer ${token}` } } : {};\r\n  return api.get(\"/auth/me\", config);\r\n};"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,yLAA2B,0BAA0B;;AAE9C,MAAM,eAAe,CAAC,OAKvB,iHAAG,CAAC,IAAI,CAAC,kBAAkB;AAE1B,MAAM,YAAY,CAAC,OAGpB,iHAAG,CAAC,IAAI,CAAC,eAAe;AAEvB,MAAM,cAAc,CAAC,QAC1B,iHAAG,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,OAAO;AACtC,MAAM,iBAAiB,CAAC,QAC7B,iHAAG,CAAC,IAAI,CAAC,yBAAyB;QAAE;IAAM;AAErC,MAAM,gBAAgB,CAAC,OAGxB,iHAAG,CAAC,IAAI,CAAC,wBAAwB;AAEhC,MAAM,QAAQ,CAAC;IACpB,MAAM,SAAS,QAAQ;QAAE,SAAS;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC;IAAE,IAAI,CAAC;IAC5E,OAAO,iHAAG,CAAC,GAAG,CAAC,YAAY;AAC7B"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/app/%28auth%29/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { loginUser } from \"@/lib/auth\";\r\nimport { useAuth } from \"@/context/AuthContext\"; // 1. Import useAuth\r\nimport toast from \"react-hot-toast\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { Mail, Lock, LogIn } from \"lucide-react\";\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email(\"Invalid email address\"),\r\n  password: z.string().min(1, \"Password is required\"),\r\n});\r\n\r\ntype LoginFormData = z.infer<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const { refreshUser } = useAuth(); // 2. Grab refresh function\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors } } = useForm<LoginFormData>({\r\n    resolver: zodResolver(loginSchema),\r\n  });\r\n\r\n  const onSubmit = async (data: LoginFormData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await loginUser(data);\r\n      const token = res.data.token; // Get the token from response\r\n      // 3. Set Cookie\r\n      document.cookie = `accessToken=${token}; path=/; max-age=86400; SameSite=Lax`;\r\n      \r\n      // 4. Update Context so the rest of the app knows we are logged in\r\n        await refreshUser(token);      \r\n      toast.success(\"Welcome back!\");\r\n\r\n      // 5. Intelligent Redirect based on Role\r\n      if (user.role === \"VENDOR\") {\r\n        router.push(\"/vendor/rfq\");\r\n      } else {\r\n        router.push(\"/buyer/rfq/list\");\r\n      }\r\n\r\n    } catch (err: any) {\r\n      toast.error(err.response?.data?.message || \"Invalid credentials\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-slate-50 px-4 py-12\">\r\n      <div className=\"max-w-md w-full space-y-8 bg-white p-10 rounded-2xl shadow-xl border border-slate-100\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-3xl font-extrabold text-slate-900\">Sign In</h2>\r\n          <p className=\"mt-2 text-sm text-slate-600\">Access the Bulk-Buy Enterprise Portal</p>\r\n        </div>\r\n\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-slate-700 mb-1\">Email Address</label>\r\n              <div className=\"relative\">\r\n                <Mail className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  {...register(\"email\")}\r\n                  type=\"email\"\r\n                  className=\"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 transition-all outline-none\"\r\n                  placeholder=\"admin@bulkbuy.com\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"flex justify-between mb-1\">\r\n                <label className=\"block text-sm font-medium text-slate-700\">Password</label>\r\n                {/* ✅ FORGOT PASSWORD LINK ADDED HERE */}\r\n                <Link \r\n                  href=\"/forgot-password\" \r\n                  className=\"text-xs font-semibold text-blue-600 hover:text-blue-500 transition-colors\"\r\n                >\r\n                  Forgot password?\r\n                </Link>\r\n              </div>\r\n              <div className=\"relative\">\r\n                <Lock className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400\" />\r\n                <input\r\n                  {...register(\"password\")}\r\n                  type=\"password\"\r\n                  className=\"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 bg-slate-50 focus:ring-2 focus:ring-blue-500 transition-all outline-none\"\r\n                  placeholder=\"••••••••\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className=\"w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-bold rounded-lg text-white bg-blue-600 hover:bg-blue-700 focus:outline-none transition-all disabled:opacity-50\"\r\n          >\r\n            {isLoading ? \"Signing in...\" : \"Sign In\"} <LogIn className=\"ml-2 h-4 w-4\" />\r\n          </button>\r\n\r\n          <p className=\"text-center text-sm text-slate-600\">\r\n            New here? <Link href=\"/register\" className=\"text-blue-600 font-bold\">Create an account</Link>\r\n          </p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA,mNAAiD,oBAAoB;AACrE;AACA;AACA;AACA;AACA;AAAA;AAAA;AAXA;;;;;;;;;;;;AAaA,MAAM,cAAc,kOAAC,CAAC,MAAM,CAAC;IAC3B,OAAO,kOAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,UAAU,kOAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AAC9B;AAIe,SAAS;IACtB,MAAM,SAAS,IAAA,8PAAS;IACxB,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,kIAAO,KAAI,2BAA2B;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gUAAQ,EAAC;IAE3C,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,WAAW,EAAE,MAAM,EAAE,EAAE,GAAG,IAAA,kQAAO,EAAgB;QAC/E,UAAU,IAAA,oRAAW,EAAC;IACxB;IAEA,MAAM,WAAW,OAAO;QACtB,aAAa;QACb,IAAI;YACF,MAAM,MAAM,MAAM,IAAA,wHAAS,EAAC;YAC5B,MAAM,QAAQ,IAAI,IAAI,CAAC,KAAK,EAAE,8BAA8B;YAC5D,gBAAgB;YAChB,SAAS,MAAM,GAAG,CAAC,YAAY,EAAE,MAAM,qCAAqC,CAAC;YAE7E,kEAAkE;YAChE,MAAM,YAAY;YACpB,2QAAK,CAAC,OAAO,CAAC;YAEd,wCAAwC;YACxC,IAAI,KAAK,IAAI,KAAK,UAAU;gBAC1B,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QAEF,EAAE,OAAO,KAAU;YACjB,2QAAK,CAAC,KAAK,CAAC,IAAI,QAAQ,EAAE,MAAM,WAAW;QAC7C,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6VAAC;QAAI,WAAU;kBACb,cAAA,6VAAC;YAAI,WAAU;;8BACb,6VAAC;oBAAI,WAAU;;sCACb,6VAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,6VAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;;8BAG7C,6VAAC;oBAAK,WAAU;oBAAiB,UAAU,aAAa;;sCACtD,6VAAC;4BAAI,WAAU;;8CACb,6VAAC;;sDACC,6VAAC;4CAAM,WAAU;sDAAgD;;;;;;sDACjE,6VAAC;4CAAI,WAAU;;8DACb,6VAAC,8RAAI;oDAAC,WAAU;;;;;;8DAChB,6VAAC;oDACE,GAAG,SAAS,QAAQ;oDACrB,MAAK;oDACL,WAAU;oDACV,aAAY;;;;;;;;;;;;;;;;;;8CAKlB,6VAAC;;sDACC,6VAAC;4CAAI,WAAU;;8DACb,6VAAC;oDAAM,WAAU;8DAA2C;;;;;;8DAE5D,6VAAC,sRAAI;oDACH,MAAK;oDACL,WAAU;8DACX;;;;;;;;;;;;sDAIH,6VAAC;4CAAI,WAAU;;8DACb,6VAAC,8RAAI;oDAAC,WAAU;;;;;;8DAChB,6VAAC;oDACE,GAAG,SAAS,WAAW;oDACxB,MAAK;oDACL,WAAU;oDACV,aAAY;;;;;;;;;;;;;;;;;;;;;;;;sCAMpB,6VAAC;4BACC,MAAK;4BACL,UAAU;4BACV,WAAU;;gCAET,YAAY,kBAAkB;gCAAU;8CAAC,6VAAC,qSAAK;oCAAC,WAAU;;;;;;;;;;;;sCAG7D,6VAAC;4BAAE,WAAU;;gCAAqC;8CACtC,6VAAC,sRAAI;oCAAC,MAAK;oCAAY,WAAU;8CAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMjF"}}]
}