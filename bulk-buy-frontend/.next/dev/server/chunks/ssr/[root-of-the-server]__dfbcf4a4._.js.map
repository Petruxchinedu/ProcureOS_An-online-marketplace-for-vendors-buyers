{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENTERPRISE/bulk-buy-frontend/app/%28auth%29/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useForm } from \"react-hook-form\";\r\nimport { z } from \"zod\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { loginUser } from \"@/lib/auth\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport toast from \"react-hot-toast\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { Mail, Lock, LogIn, Zap, ShieldCheck, Globe } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email(\"Invalid corporate email\"),\r\n  password: z.string().min(1, \"Access key is required\"),\r\n});\r\n\r\ntype LoginFormData = z.infer<typeof loginSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const { refreshUser } = useAuth(); \r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const { register, handleSubmit, setError, formState: { errors } } = useForm<LoginFormData>({\r\n    resolver: zodResolver(loginSchema),\r\n  });\r\n\r\n  const onSubmit = async (data: LoginFormData) => {\r\n    setIsLoading(true);\r\n    try {\r\n      const res = await loginUser(data);\r\n      const token = res.data.token || res.data.accessToken; \r\n      const user = res.data.user;\r\n\r\n      if (!token) throw new Error(\"No token received\");\r\n\r\n      localStorage.setItem(\"token\", token);\r\n      document.cookie = `accessToken=${token}; path=/; max-age=86400; SameSite=Lax`;\r\n      \r\n      await refreshUser(token);      \r\n      toast.success(\"Identity Verified. Welcome.\");\r\n\r\n      if (user.role === \"VENDOR\") {\r\n        router.push(\"/vendor/rfq\"); \r\n      } else {\r\n        router.push(\"/dashboard\");\r\n      }\r\n    } catch (err: any) {\r\n      setIsLoading(false); \r\n      if (err.response?.status === 401) {\r\n        setError(\"password\", {\r\n          type: \"manual\",\r\n          message: \"Wrong email or password\",\r\n        });\r\n        toast.error(\"Invalid credentials\");\r\n      } else if (err.response?.status === 403) {\r\n        toast.error(\"Please verify your email first\");\r\n      } else {\r\n        toast.error(err.response?.data?.message || \"Authentication Failed\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-[#020617] relative overflow-hidden px-4\">\r\n      \r\n      {/* BACKGROUND GRAPHICS */}\r\n      <div className=\"absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-blue-600/10 blur-[120px] rounded-full\" />\r\n      <div className=\"absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-indigo-600/10 blur-[120px] rounded-full\" />\r\n      <div className=\"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 pointer-events-none\" />\r\n\r\n      <motion.div \r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        className=\"max-w-md w-full z-10\"\r\n      >\r\n        {/* LOGO AREA */}\r\n        <div className=\"flex flex-col items-center mb-10\">\r\n          <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-2xl shadow-blue-500/20 mb-4 transform rotate-12\">\r\n            <Zap size={32} fill=\"currentColor\" />\r\n          </div>\r\n          <h1 className=\"text-3xl font-[1000] tracking-tighter text-white uppercase italic\">\r\n            Procure<span className=\"text-blue-500\">OS</span>\r\n          </h1>\r\n          <p className=\"text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mt-2\">Enterprise Access Terminal</p>\r\n        </div>\r\n\r\n        {/* LOGIN CARD */}\r\n        <div className=\"bg-[#0F172A]/80 backdrop-blur-2xl p-10 rounded-[2.5rem] border border-white/5 shadow-2xl relative overflow-hidden\">\r\n          <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-50\" />\r\n          \r\n          <form className=\"space-y-6\" onSubmit={handleSubmit(onSubmit)}>\r\n            \r\n            {/* EMAIL INPUT */}\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1\">Corporate Identity</label>\r\n              <div className=\"relative group\">\r\n                <Mail className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500 group-focus-within:text-blue-400 transition-colors\" />\r\n                <input\r\n                  {...register(\"email\")}\r\n                  type=\"email\"\r\n                  className=\"w-full bg-slate-900/50 border border-white/5 rounded-2xl pl-12 pr-4 py-4 text-white placeholder:text-slate-600 outline-none focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/5 transition-all font-medium\"\r\n                  placeholder=\"name@enterprise.com\"\r\n                />\r\n              </div>\r\n              {errors.email && <p className=\"text-red-400 text-[10px] font-bold uppercase mt-1 ml-1\">{errors.email.message}</p>}\r\n            </div>\r\n\r\n            {/* PASSWORD INPUT */}\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between items-center ml-1\">\r\n                <label className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest\">Access Key</label>\r\n                <Link href=\"/forgot-password\" className=\"text-[10px] font-black text-blue-500 uppercase tracking-widest hover:underline\">Lost Key?</Link>\r\n              </div>\r\n              <div className=\"relative group\">\r\n                <Lock className=\"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-500 group-focus-within:text-blue-400 transition-colors\" />\r\n                <input\r\n                  {...register(\"password\")}\r\n                  type=\"password\"\r\n                  className=\"w-full bg-slate-900/50 border border-white/5 rounded-2xl pl-12 pr-4 py-4 text-white placeholder:text-slate-600 outline-none focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/5 transition-all font-medium\"\r\n                  placeholder=\"••••••••\"\r\n                />\r\n              </div>\r\n              {errors.password && <p className=\"text-red-400 text-[10px] font-bold uppercase mt-1 ml-1\">{errors.password.message}</p>}\r\n            </div>\r\n\r\n            {/* SUBMIT BUTTON */}\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full relative group overflow-hidden bg-blue-600 hover:bg-blue-500 text-white py-5 rounded-2xl font-black text-xs uppercase tracking-[0.2em] transition-all shadow-xl shadow-blue-500/20 active:scale-95 disabled:opacity-50\"\r\n            >\r\n              <span className=\"relative z-10 flex items-center justify-center gap-2\">\r\n                {isLoading ? \"Authenticating...\" : \"Establish Connection\"} \r\n                {!isLoading && <LogIn size={16} />}\r\n              </span>\r\n              <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000\" />\r\n            </button>\r\n          </form>\r\n\r\n          {/* REGISTER LINK */}\r\n          <div className=\"mt-10 pt-8 border-t border-white/5 text-center\">\r\n            <p className=\"text-slate-500 text-[10px] font-black uppercase tracking-widest\">\r\n              No Clearance? <Link href=\"/register\" className=\"text-blue-500 hover:text-white transition-colors ml-2\">Request Onboarding</Link>\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* FOOTER INFO */}\r\n        <div className=\"mt-8 flex justify-center gap-6 text-slate-600\">\r\n           <div className=\"flex items-center gap-2\">\r\n              <ShieldCheck size={14} className=\"text-blue-500/50\" />\r\n              <span className=\"text-[9px] font-bold uppercase tracking-widest\">AES-256 Encrypted</span>\r\n           </div>\r\n           <div className=\"flex items-center gap-2\">\r\n              <Globe size={14} className=\"text-blue-500/50\" />\r\n              <span className=\"text-[9px] font-bold uppercase tracking-widest\">Global Node</span>\r\n           </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}