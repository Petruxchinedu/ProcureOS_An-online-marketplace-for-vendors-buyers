{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/app/vendor/edit/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useParams } from \"next/navigation\";\r\nimport { api } from \"@/lib/api\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { PackagePlus, Check, ArrowLeft, Loader2 } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function EditProductPage() {\r\n  const router = useRouter();\r\n  const { id } = useParams(); // Gets the ID from the URL\r\n  const [loading, setLoading] = useState(false);\r\n  const [fetching, setFetching] = useState(true);\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    pricePerUnit: \"\",\r\n    minimumOrderQuantity: \"\",\r\n    category: \"\",\r\n    imageUrl: \"\"\r\n  });\r\n\r\n  // 1. Fetch existing product data\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const res = await api.get(`/products/${id}`);\r\n        const p = res.data;\r\n        setFormData({\r\n          name: p.name,\r\n          description: p.description || \"\",\r\n          pricePerUnit: p.pricePerUnit.toString(),\r\n          minimumOrderQuantity: p.minimumOrderQuantity.toString(),\r\n          category: p.category,\r\n          imageUrl: p.images?.[0] || \"\"\r\n        });\r\n      } catch (err) {\r\n        toast.error(\"Could not load product\");\r\n      } finally {\r\n        setFetching(false);\r\n      }\r\n    };\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      await api.put(`/products/${id}`, {\r\n        ...formData,\r\n        pricePerUnit: Number(formData.pricePerUnit),\r\n        minimumOrderQuantity: Number(formData.minimumOrderQuantity),\r\n        images: formData.imageUrl ? [formData.imageUrl] : []\r\n      });\r\n      toast.success(\"Product updated!\");\r\n      router.push(\"/vendor/inventory\");\r\n    } catch (error: any) {\r\n      toast.error(\"Update failed\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (fetching) return <div className=\"p-20 text-center\"><Loader2 className=\"animate-spin mx-auto\" /></div>;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#F8FAFC] p-6 md:p-12\">\r\n      <div className=\"max-w-3xl mx-auto\">\r\n        <Link href=\"/vendor/inventory\" className=\"flex items-center text-slate-500 mb-8 hover:text-blue-600 transition-all font-bold\">\r\n          <ArrowLeft size={20} className=\"mr-2\" /> Back to Inventory\r\n        </Link>\r\n\r\n        <div className=\"bg-white rounded-[2.5rem] shadow-xl border border-slate-100 overflow-hidden\">\r\n          <div className=\"bg-blue-600 p-8 text-white\">\r\n            <h1 className=\"text-3xl font-black flex items-center gap-3\">Edit Product</h1>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"p-8 space-y-6\">\r\n            <div className=\"space-y-2\">\r\n              <label className=\"text-sm font-bold text-slate-700\">Product Name</label>\r\n              <input required value={formData.name} className=\"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl\" \r\n                onChange={e => setFormData({...formData, name: e.target.value})} />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-2 gap-6\">\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-bold text-slate-700\">Unit Price ($)</label>\r\n                <input type=\"number\" required value={formData.pricePerUnit} className=\"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl\" \r\n                  onChange={e => setFormData({...formData, pricePerUnit: e.target.value})} />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <label className=\"text-sm font-bold text-slate-700\">Min Order Qty</label>\r\n                <input type=\"number\" required value={formData.minimumOrderQuantity} className=\"w-full p-4 bg-slate-50 border border-slate-200 rounded-2xl\" \r\n                  onChange={e => setFormData({...formData, minimumOrderQuantity: e.target.value})} />\r\n              </div>\r\n            </div>\r\n\r\n            <button disabled={loading} className=\"w-full py-5 bg-blue-600 text-white font-black rounded-2xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2\">\r\n              {loading ? <Loader2 className=\"animate-spin\" /> : \"Save Changes\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}