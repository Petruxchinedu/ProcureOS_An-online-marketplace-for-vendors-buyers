{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/bless/OneDrive/Desktop/BULK-BUY-ENETRPRISE/frontend/bulk-buy-frontend/app/buyer/rfq/list/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { api } from \"@/lib/api\";\r\nimport Link from \"next/link\";\r\nimport { \r\n  Inbox, \r\n  CheckCircle2, \r\n  Clock, \r\n  ArrowUpRight, \r\n  BarChart3,\r\n  Zap,\r\n  ShoppingBag,\r\n  AlertTriangle,\r\n  RefreshCcw\r\n} from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport default function BuyerRFQDashboard() {\r\nconst { data: rfqs, isLoading, isError, error, refetch } = useQuery({\r\n      queryKey: [\"buyer-rfqs\"],\r\n    queryFn: async () => {\r\nconst res = await api.get(\"/rfq/list/buyer\");\r\n      return Array.isArray(res.data) ? res.data : [];\r\n    },\r\n    retry: 1,\r\n  });\r\n\r\n  const paymentMutation = useMutation({\r\n    mutationFn: async (rfqId: string) => {\r\n      const res = await api.post(\"/payments/create-checkout\", { rfqId });\r\n      return res.data; // This is the object containing the Stripe URL\r\n    },\r\n    onSuccess: (data) => {\r\n      // Redirect the user to the Stripe Checkout page\r\n      if (data.url) {\r\n        window.location.href = data.url;\r\n      }\r\n    },\r\n    onError: (err: any) => {\r\n      console.error(\"Payment Error:\", err);\r\n      alert(\"Failed to initiate payment. Please try again.\");\r\n    }\r\n  });\r\n\r\n  if (isLoading) return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-[#020617]\">\r\n      <div className=\"w-12 h-12 border-[6px] border-blue-600/10 border-t-blue-600 rounded-full animate-spin\" />\r\n      <p className=\"mt-6 font-[900] text-slate-500 animate-pulse tracking-[0.4em] text-[10px] uppercase\">Initializing_Secure_Link...</p>\r\n    </div>\r\n  );\r\n\r\n if (isError) return (\r\n  <div className=\"min-h-screen flex flex-col items-center justify-center bg-[#020617] p-8\">\r\n    <div className=\"bg-red-500/10 border border-red-500/20 p-10 rounded-[2.5rem] flex flex-col items-center max-w-lg text-center\">\r\n      <AlertTriangle className=\"text-red-500 mb-6\" size={50} />\r\n      <h2 className=\"text-2xl font-black text-white uppercase italic tracking-tighter\">Connection Error</h2>\r\n      <p className=\"text-slate-400 font-bold text-sm mt-4 leading-relaxed\">\r\n        {/* This will now show the actual error from your backend */}\r\n        {(error as any)?.response?.data?.message || \"Could not retrieve procurement data. Please check your network or login session.\"}\r\n      </p>\r\n      <button \r\n        onClick={() => refetch()}\r\n        className=\"mt-8 flex items-center gap-2 bg-white text-black px-8 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-slate-200 transition-all\"\r\n      >\r\n        <RefreshCcw size={14} /> Retry Sync\r\n      </button>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#020617] text-slate-100 p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <header className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-12\">\r\n          <div>\r\n            <h1 className=\"text-5xl font-[1000] tracking-tighter uppercase italic leading-none text-white\">Negotiated Assets</h1>\r\n            <p className=\"text-slate-500 font-bold text-sm tracking-wide mt-3 uppercase italic opacity-70\">Secured Procurement Ledger</p>\r\n          </div>\r\n          <Link href=\"/dashboard\" className=\"flex items-center gap-3 bg-blue-600 hover:bg-blue-500 text-white px-8 py-4 rounded-2xl font-black text-[11px] uppercase tracking-[0.2em] transition-all shadow-xl shadow-blue-900/20\">\r\n            <ShoppingBag size={18} /> Create New RFQ\r\n          </Link>\r\n        </header>\r\n\r\n        <div className=\"bg-[#0F172A] rounded-[3rem] border border-blue-900/20 overflow-hidden shadow-2xl\">\r\n          <table className=\"w-full text-left\">\r\n            <thead>\r\n              <tr className=\"bg-blue-900/10\">\r\n                <th className=\"px-10 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Product Asset</th>\r\n                <th className=\"px-10 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Vendor Entity</th>\r\n                <th className=\"px-10 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Current Bid</th>\r\n                <th className=\"px-10 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em]\">Status</th>\r\n                <th className=\"px-10 py-6 text-[10px] font-black text-slate-500 uppercase tracking-[0.2em] text-right\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-blue-900/10\">\r\n              {rfqs?.map((rfq: any) => {\r\n                const status = rfq.status?.toUpperCase() || 'PENDING';\r\nconst canPay = status === 'ACCEPTED' || status === 'APPROVED';\r\n              const isPaid = status === 'PAID';                \r\n                return (\r\n                  <tr key={rfq._id} className=\"hover:bg-blue-600/[0.03] transition-colors\">\r\n                    <td className=\"px-10 py-8\">\r\n                      <div className=\"flex items-center gap-5\">\r\n                        <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-600/20 to-indigo-600/20 border border-blue-500/20 text-blue-400 flex items-center justify-center\">\r\n                          <BarChart3 size={22} />\r\n                        </div>\r\n                        <div>\r\n                          <p className=\"text-base font-black text-white\">{rfq.productId?.name || \"Standard Item\"}</p>\r\n                          <p className=\"text-[11px] text-slate-500 font-bold\">QTY: {rfq.quantity}</p>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-10 py-8\">\r\n                      <p className=\"text-sm font-bold text-slate-300 uppercase tracking-tight\">{rfq.vendorId?.organizationName || \"Awaiting Vendor\"}</p>\r\n                    </td>\r\n                    <td className=\"px-10 py-8\">\r\n                      <p className=\"text-lg font-black text-white tabular-nums\">\r\n                        ${((rfq.vendorCounterPrice || rfq.targetUnitPrice || 0) * rfq.quantity).toLocaleString()}\r\n                      </p>\r\n                      <p className=\"text-[9px] text-blue-500 font-black uppercase mt-1\">Contract Total</p>\r\n                    </td>\r\n                    <td className=\"px-10 py-8\">\r\n                      <span className={cn(\r\n                        \"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border\",\r\n                        isFinalized ? \"bg-emerald-500/10 text-emerald-400 border-emerald-500/30\" : \"bg-blue-500/10 text-blue-500 border-blue-500/30\"\r\n                      )}>\r\n                        {status}\r\n                      </span>\r\n                    </td>\r\n                   <td className=\"px-10 py-8 text-right\">\r\n                    {isPaid ? (\r\n                      <span className=\"text-emerald-500 font-black text-[10px] uppercase tracking-widest\">\r\n                        Payment Complete\r\n                      </span>\r\n                    ) : canPay ? (\r\n                      // --- THE NEW PAYMENT BUTTON ---\r\n                      <button \r\n                        onClick={() => paymentMutation.mutate(rfq._id)}\r\n                        disabled={paymentMutation.isPending}\r\n                        className=\"inline-flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white px-5 py-2.5 rounded-xl font-black uppercase text-[10px] transition-all disabled:opacity-50\"\r\n                      >\r\n                        {paymentMutation.isPending ? \"Connecting...\" : \"Pay & Secure\"}\r\n                        <ArrowUpRight size={14} />\r\n                      </button>\r\n                    ) : (\r\n                      <Link \r\n                        href={`/buyer/rfq/${rfq._id}`}\r\n                        className=\"inline-flex items-center gap-2 bg-slate-800 text-slate-200 px-5 py-2.5 rounded-xl text-[10px] font-black uppercase\"\r\n                      >\r\n                        Negotiating\r\n                      </Link>\r\n                    )}\r\n                  </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n          \r\n          {rfqs?.length === 0 && (\r\n            <div className=\"p-32 text-center flex flex-col items-center\">\r\n              <div className=\"w-20 h-20 bg-slate-900/50 rounded-full flex items-center justify-center mb-6\">\r\n                <Inbox className=\"text-slate-700\" size={40} />\r\n              </div>\r\n              <p className=\"text-slate-500 font-black uppercase tracking-[0.3em] text-[10px]\">No Negotiated Goods Found</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}